<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Supply Chain CO₂ Dashboard</title>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

  <link rel="stylesheet" href="./styles.css" />
</head>

<body>

  <!-- =========================
       TOPBAR with scope cards
       ========================= -->
  <header class="topbar" style="padding-bottom:0;">
    <div class="container" style="max-width:1400px; display:flex; justify-content:space-between; align-items:flex-start; gap:24px;">

      <!-- LEFT: Title -->
      <div style="flex:0 0 auto; min-width:320px;">
        <h1>Supply Chain CO₂ Dashboard</h1>
        <p class="subtitle">Upload CSV → choose industry preset → compute emissions</p>
      </div>

      <!-- RIGHT: Scope Info Cards -->
      <div style="display:flex; gap:16px; flex:1; justify-content:flex-end; align-items:flex-start;">

        <div class="scope-card">
          <h4>Scope 1 — Direct emissions</h4>
          <p>Owned/controlled sources (company vehicles, fuel combustion).</p>
        </div>

        <div class="scope-card">
          <h4>Scope 2 — Indirect energy</h4>
          <p>Purchased electricity, heating, steam.</p>
        </div>

        <div class="scope-card">
          <h4>Scope 3 — Value chain</h4>
          <p>Transportation, purchased goods, waste, upstream/downstream.</p>
        </div>

      </div>
    </div>
  </header>

  <main class="container" style="max-width:1400px;">

    <!-- LEFT COLUMN -->
    <div class="left">

      <!-- Side navigation -->
      <nav id="sideNav" class="side-nav">
        <ul>
          <li><button class="nav-link active" data-target="top">Dashboard</button></li>
          <li><button class="nav-link" data-target="charts">Charts</button></li>
          <li><button class="nav-link" data-target="hotspotContainer">Hotspot</button></li>
        </ul>
      </nav>

      <!-- Upload box -->
      <div id="uploadBox" class="upload-box" role="button">
        <input id="fileInput" type="file" accept=".csv" />
        <div class="drop-hint">
          Drag & drop CSV here, or <button id="pickFileBtn" class="btn small">click to choose a file</button>
        </div>
        <div id="fileName" class="file-name">No file selected</div>
      </div>

      <!-- Controls -->
      <div class="controls">
        <label for="presetSelect">Industry preset</label>
        <select id="presetSelect">
          <option value="baseline">baseline</option>
          <option value="apparel">apparel</option>
          <option value="electronics">electronics</option>
          <option value="food">food</option>
          <option value="metal">metal</option>
          <option value="packaging">packaging</option>
          <option value="automotive">automotive</option>
        </select>

        <div class="control-row" style="margin-top:10px;">
          <button id="computeBtn" class="btn primary">Compute emissions</button>
          <button id="downloadBtn" class="btn" disabled>Download results</button>
        </div>

        <div id="messages" class="messages">Computation status will appear here.</div>
      </div>
    </div>

    <!-- RIGHT COLUMN -->
    <div class="right">

      <!-- METRICS ROW -->
      <div style="margin:18px 0;">
        <div style="display:flex;gap:18px;flex-wrap:wrap;">

          <div class="metric">
            <div class="mval" id="totalVal">-</div>
            <div class="mlabel">Total kg CO₂</div>
          </div>

          <div class="metric">
            <div class="mval" id="scope1Val">-</div>
            <div class="mlabel">Scope 1</div>
          </div>

          <div class="metric">
            <div class="mval" id="scope2Val">-</div>
            <div class="mlabel">Scope 2</div>
          </div>

          <div class="metric">
            <div class="mval" id="scope3Val">-</div>
            <div class="mlabel">Scope 3</div>
          </div>

        </div>
      </div>

      <!-- CHART GRID -->
      <div class="charts-grid" id="charts">

        <!-- Stage Breakdown -->
        <div class="card chart-card">
          <div class="card-header"><h3>Stage breakdown (top 10)</h3></div>
          <div class="card-body">
            <canvas id="stageChart"></canvas>
          </div>
        </div>

        <!-- Scope Breakdown -->
        <div class="card chart-card">
          <div class="card-header"><h3>Scope breakdown</h3></div>
          <div class="card-body">
            <canvas id="scopeChart"></canvas>
          </div>
        </div>

      </div>

      <!-- HOTSPOT CARD -->
      <div id="hotspotContainer" class="card hotspot-card">
        <div class="card-header" style="display:flex;justify-content:space-between;">
          <h3>Hotspot</h3>
          <div style="font-size:13px;color:#6b7280">Most intensive row in dataset</div>
        </div>

        <div class="card-body" style="padding:12px;">

          <div class="hotspot-top" style="display:flex;gap:16px;align-items:flex-start;">

            <!-- DONUT -->
            <div class="hs-donut-wrap">
              <div id="hsContribution" class="hs-donut">
                <div class="hs-donut-center">
                  <div id="hsContributionPct">—</div>
                  <div style="font-size:12px;color:#6b7280">of total</div>
                </div>
              </div>
              <div style="text-align:center;margin-top:8px;">
                <div style="font-size:13px;color:#6b7280">Row total (kg CO₂)</div>
                <div id="hsRowTotal" style="font-weight:700;font-size:18px">—</div>
              </div>
            </div>

            <!-- METRICS -->
            <div style="flex:1;display:grid;grid-template-columns:repeat(2,1fr);gap:10px;">
              <div class="metric"><div class="metric-label">Mode</div><div id="hsMode" class="metric-value">—</div></div>
              <div class="metric"><div class="metric-label">Stage</div><div id="hsStage" class="metric-value">—</div></div>
              <div class="metric"><div class="metric-label">Distance (km)</div><div id="hsDistance" class="metric-value">—</div></div>
              <div class="metric"><div class="metric-label">Weight (kg)</div><div id="hsWeight" class="metric-value">—</div></div>
              <div class="metric"><div class="metric-label">Material</div><div id="hsMaterial" class="metric-value">—</div></div>
              <div class="metric"><div class="metric-label">Manufacturing (kWh)</div><div id="hsEnergy" class="metric-value">—</div></div>
            </div>

            <!-- COMPONENT CHART -->
            <div style="flex:0 0 320px;">
              <div style="font-weight:600;margin-bottom:8px;">Component breakdown</div>
              <canvas id="hotspotMiniChart"></canvas>
              <div id="hotspotBreakdown" style="margin-top:10px;font-size:13px;color:#374151"></div>
            </div>

          </div>

          <!-- Suggestion -->
          <div style="display:flex;gap:12px;margin-top:14px;">
            <div id="hotspotSuggestion" style="flex:1">Suggestion: —</div>
          </div>

        </div>
      </div>

      <!-- Sensitivity Panel (hidden by default) -->
      <div id="sensitivityPanel" class="card sensitivity" hidden>
        <div class="card-header"><h3>Preset comparison</h3></div>
        <div id="sensitivityTable" class="card-body">No sensitivity data.</div>
      </div>

    </div>
  </main>

  <footer class="footer">Built for hackathon demo — Team AnuVed</footer>

  <!-- SCRIPT: loads your working JS -->
  <script src="./script.js"></script>

</body>
</html>
